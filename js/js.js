function getCookie(r){for(var t=r+"=",e=document.cookie.split(";"),n=0;n<e.length;n++){for(var a=e[n];" "==a.charAt(0);)a=a.substring(1);if(-1!=a.indexOf(t))return a.substring(t.length,a.length)}return""}
function rand(r,t){return Math.floor(Math.random()*t+r)}function getNum(){var r=rand(1,8),t=rand(0,9),e=rand(0,9),n=rand(0,9),a=rand(0,9),c=rand(0,9),i=rand(0,9),u=rand(0,9),l=rand(0,9),s=rand(0,9),o=rand(0,9),d=rand(0,9),g=getLastNum(r,t,e,n,a,c,i,u,l,s,o,d);return""+r+t+e+n+a+c+i+u+l+s+o+d+g}function getLastNum(){var r=arguments,t=13*r[0]+12*r[1]+11*r[2]+10*r[3]+9*r[4]+8*r[5]+7*r[6]+6*r[7]+5*r[8]+4*r[9]+3*r[10]+2*r[11],e=11-t%11;return e>9&&(e%=10),e}function $(r){return document.getElementById(r)}
function upic_custom(r,t,e){$("preuploadimages").innerHTML="";
	var n=$("upload-right");n.innerHTML='<div class="uppic-row"><div class="uppic-thumb"><img src="'+e+'"></div>URL:<br><input type="text" value="'+r+'" onclick="select()"><br>Thumb:<br><input type="text" value="[url='+r+"][img]"+e+'[/img][/url]" onclick="select()"><br>Direct:<br><input type="text" value="[img]'+t+'[/img]" onclick="select()"><div class="clearfix"></div></div>'+n.innerHTML,$("code-url").value+=r+"\n",$("code-full").value+="[img]"+t+"[/img]\n",$("code-thumb").value+="[url="+r+"][img]"+e+"[/img][/url]\n"}if("idcard"===type){var card=localStorage.getItem("cardlist"),$c=$("code-result");null===card&&(card=getCookie("random_id_card"),""===card&&(card=getNum(),localStorage.setItem("cardlist",card)));var cardlast=card.split("l");cardlast=cardlast[cardlast.length-1],$c.innerHTML=cardlast,$("btn-recal").onclick=function(r){var t=getNum();return card+="l"+t,localStorage.setItem("cardlist",card),$c.innerHTML=t,!1},$("btn-cal").onclick=function(r){var t=$("inputnumber").value,e=$("cal-result"),n=t.substr(0,1);if(t=""+t,!t.match(/^([0-9]+)$/)||12!==t.length)return e.innerHTML="โปรดใส่ตัวเลขความยาว 12 ตัวเท่านั้น",!1;if(0==n||9==n)return e.innerHTML="ตัวแรกต้องไม่ใช่ 0 หรือ 9",!1;var a=getLastNum(n,t.substr(1,1),t.substr(2,1),t.substr(3,1),t.substr(4,1),t.substr(5,1),t.substr(6,1),t.substr(7,1),t.substr(8,1),t.substr(9,1),t.substr(10,1),t.substr(11,1));return e.innerHTML=t+'<b class="red">'+a+"</b>",!1},$("btn-viewlog").onclick=function(r){var t=localStorage.getItem("cardlist");return null===t&&(t=getCookie("random_id_card")),$("log").innerHTML=t.replace(/l/g,"<br>"),!1}}else"qrcode"===type?$("makeqrcode").onclick=function(){var r=$("qr-result"),t="http://chart.apis.google.com/chart?chs="+encodeURIComponent($("size").value)+"&cht=qr&chld=L|0&chl="+encodeURIComponent($("message").value),e=new Image;e.onload=function(){r.innerHTML='<img src="'+t+'"><br>คลิกขวาและเลือกบันทึกรูปภาพเพื่อดาวน์โหลด'},e.src=t,r.innerHTML="กำลังสร้าง!"}:"uppic"===type&&(upic_target="",upic_type="");